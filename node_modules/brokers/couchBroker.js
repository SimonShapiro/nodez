function couchBroker (route) {
	var route=route
}
couchBroker.prototype={
	constructor: couchBroker,
	getDoc: function(docbase,oid,fn) {
		var callBack=fn
		options={
			url:DBROUTE+docbase+"/"+oid,
			method:"GET"
			}
		console.log("Calling couch broker with:"+JSON.stringify(options))
		var request = require('request');
		var handShake = function (error, response, body) {
			if (!error && response.statusCode == 200) {
				console.log("OK  "+response.statusCode+":"+options.url+":Couch results="+body)
		  	}
		  	else {
				console.log("!OK "+response.statusCode+":"+options.url+":Couch results="+body)
		  	}
			callBack(response.statusCode,body)
		}
		request(options,handShake)
	},
	putDoc: function(docbase,oid,json,fn) {
		var callBack=fn
		options={
			url:DBROUTE+docbase+"/"+oid,
			method:"PUT",
			headers:{'content-type':'application/json'},
			body:json
		}
		console.log("Calling couch broker with:"+JSON.stringify(options))
		var request = require('request');
		var handShake = function (error, response, body) {
			if (!error && response.statusCode == 201) {
				console.log("OK  "+response.statusCode+":"+options.url+":Couch results="+body)
		  	}
		  	else {
				console.log("!OK "+response.statusCode+":"+options.url+":Couch results="+body)
		  	}
			callBack(response.statusCode,body)
		}
		request(options,handShake)
	},
	postDoc: function(docbase,oid,json,fn) {
		var callBack=fn
		options={
			url:DBROUTE+docbase+"/",
			method:"POST",
			headers:{'content-type':'application/json'},
			body:json
		}
		console.log("Calling couch broker with:"+JSON.stringify(options))
		var request = require('request');
		var handShake = function (error, response, body) {
			if (!error && response.statusCode == 201) {
				console.log("OK  "+response.statusCode+":"+options.url+":Couch results="+body)
		  	}
		  	else {
				console.log("!OK "+response.statusCode+":"+options.url+":Couch results="+body)
		  	}
			callBack(response.statusCode,body)
		}
		request(options,handShake)
	},
	deleteDoc: function(docbase,oid,rev,fn) {
		var callBack=fn
		console.log("Delete details"+oid+":"+rev)
		options={
			url:DBROUTE+docbase+"/"+oid+"?rev="+rev,
			method:"DELETE",
			headers:{'content-type':'application/json'}
		}
		console.log("Calling couch broker with:"+JSON.stringify(options))
		var request = require('request');
		var handShake = function (error, response, body) {
			if (!error && response.statusCode == 200) {
				console.log("OK  "+response.statusCode+":"+options.url+":Couch results="+body)
		  	}
		  	else {
				console.log("!OK "+response.statusCode+":"+options.url+":Couch results="+body)
		  	}
			callBack(response.statusCode,body)
		}
		request(options,handShake)
	}
}

exports.couchBroker = couchBroker